<?xml version="1.0" encoding="UTF-8" ?>

<config xmlns="http://thelia.net/schema/dic/config"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://thelia.net/schema/dic/config http://thelia.net/schema/dic/config/thelia-1.0.xsd">


  <services>
    <!-- Parser configuration -->
    <service id="thelia.parser" class="TheliaSmarty\Template\SmartyParser" public="true"/>
    <service id="Thelia\Core\Template\ParserInterface" class="TheliaSmarty\Template\SmartyParser"/>

    <service id="Thelia\Core\Template\ParserHelperInterface" class="TheliaSmarty\Template\SmartyHelper"/>
    <service id="thelia.parser.helper" class="TheliaSmarty\Template\SmartyHelper"/>

    <!--  The assets resolver -->
    <service id="Thelia\Core\Template\Assets\AssetResolverInterface"
             class="TheliaSmarty\Template\Assets\SmartyAssetsResolver"/>
    <service id="thelia.parser.asset.resolver" class="TheliaSmarty\Template\Assets\SmartyAssetsResolver"/>

    <!--  Smarty parser plugins-->

    <service id="smarty.plugin.assets" class="TheliaSmarty\Template\Plugins\Assets"/>

    <service id="smarty.plugin.format" class="TheliaSmarty\Template\Plugins\Format">
      <tag name="thelia.parser.register_plugin"/>

      <argument type="service" id="thelia.form_factory"/>
      <argument type="service" id="thelia.parser.context"/>
      <argument type="service" id="thelia.parser"/>
      <argument type="service" id="thelia.translator"/>

      <call method="setFormDefinition">
        <argument>%Thelia.parser.forms%</argument>
      </call>
    </service>

    <service id="smarty.plugin.thelialoop" class="TheliaSmarty\Template\Plugins\TheliaLoop" public="true"/>

    <service id="smarty.plugin.cartpostage" class="TheliaSmarty\Template\Plugins\CartPostage"/>

    <service id="smarty.plugin.type" class="TheliaSmarty\Template\Plugins\Type"/>

    <service id="smarty.plugin.render" class="TheliaSmarty\Template\Plugins\Render"/>

    <service id="smarty.plugin.format">

    </service>
    <service id="smart.plugin.form" class="TheliaSmarty\Template\Plugins\Form"/>

    <service id="smarty.plugin.translation" class="TheliaSmarty\Template\Plugins\Translation"/>

    <service id="smarty.plugin.module" class="TheliaSmarty\Template\Plugins\Module"/>

    <service id="smarty.url.module" class="TheliaSmarty\Template\Plugins\UrlGenerator"/>

    <service id="smarty.plugin.security" class="TheliaSmarty\Template\Plugins\Security"/>

    <service id="smarty.plugin.dataAccess" class="TheliaSmarty\Template\Plugins\DataAccessFunctions"/>

    <service id="smarty.plugin.adminUtilities" class="TheliaSmarty\Template\Plugins\AdminUtilities"/>

    <service id="smarty.plugin.flashMessage" class="TheliaSmarty\Template\Plugins\FlashMessage"/>

    <service id="smarty.plugin.hook" class="TheliaSmarty\Template\Plugins\Hook"/>

    <service id="smarty.plugin.cache" class="TheliaSmarty\Template\Plugins\Cache"/>

    <service id="smarty.plugin.var_dumper" class="TheliaSmarty\Template\Plugins\VarDumper">
      <tag name="thelia.parser.register_plugin"/>
      <argument>%kernel.debug%</argument>
    </service>
  </services>

</config>
